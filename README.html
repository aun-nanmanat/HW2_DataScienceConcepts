<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>readme</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="README_files/libs/clipboard/clipboard.min.js"></script>
<script src="README_files/libs/quarto-html/quarto.js"></script>
<script src="README_files/libs/quarto-html/popper.min.js"></script>
<script src="README_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="README_files/libs/quarto-html/anchor.min.js"></script>
<link href="README_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="README_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="README_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="README_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="README_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="readme" class="level1">
<h1>README</h1>
</section>
<section id="homework-02" class="level1">
<h1>Homework 02</h1>
<p>‼️ <strong>Update:</strong> <a href="Update_Week3.md">Week 3 Exercises</a></p>
<p>Exercises instructions of Week 2 below.</p>
<p><strong>Data Visualization and Data Wrangling with <code>nycflights13</code>.</strong> A data set about flights departing from the three New York City airports in 2013. This is a common practice data collection in data science.</p>
<section id="general-instructions" class="level2">
<h2 class="anchored" data-anchor-id="general-instructions">General instructions</h2>
<p>This repo contains starter documents.</p>
<ul>
<li>Clone this repository to your local machine</li>
</ul>
<p>In <strong>Week 2</strong> do the in R with RStudio: - Do the exercises below in the file <strong>hw-02-R.qmd</strong>. - In git, add your changes, commit, and push it back to this GitHub repository.</p>
<p>You have learned how to do the <em>git-GitHub dance</em> in Homework 01.<br>
If you do not know how to do it, do Homework 01 before.</p>
<p>In <strong>Week 3</strong> do the same in Python in the file <strong>hw-02-py.qmd</strong>.</p>
</section>
<section id="instructions-for-r" class="level2">
<h2 class="anchored" data-anchor-id="instructions-for-r">Instructions for R</h2>
<p>Work in the file <strong>hw-02-R.qmd</strong>.</p>
<section id="warm-up-with-the-git-github-dance" class="level3">
<h3 class="anchored" data-anchor-id="warm-up-with-the-git-github-dance">Warm up with the <em>git-GitHub dance</em></h3>
<p>Fill in your name in the YAML and render. Stage the modified .qmd files and add the html-files in Git and make a commit with message “Rendering to html works”. Push this commit to GitHub.</p>
</section>
<section id="data-overview" class="level3">
<h3 class="anchored" data-anchor-id="data-overview">Data overview</h3>
<ol type="1">
<li><p>Run the first chunk <code>packages-data</code> such that the lines are executed in the console to load the tidyverse functions and the ny3cflight13 data. See which dataframes are available in the Environment tab. The environment should be empty, but you can select “package:nycflights13” instead of “Global Environment” and you see values markes as <code>&lt;Promise&gt;</code>. Once you click on one or call it in the Console you see basic information there.</p></li>
<li><p>Replace the “??” in the text with the actual numbers. Don’t write the numbers your self, but write <em>inline code</em> in which you output the number of rows of each data frame. In the document this already done for the <code>airlines</code>. See how the backticks <code>`</code> with a starting <code>r</code> specify something like a small inline chunk. Render the document to see if it works. More information <a href="https://quarto.org/docs/get-started/computations/rstudio.html#inline-code" class="uri">https://quarto.org/docs/get-started/computations/rstudio.html#inline-code</a></p></li>
<li><p>Explore the datasets. Write <code>View(flights)</code> in the Console to see the data as a spreadsheet. Write <code>glimpse(flight)</code> to see an overview of all variables, their types and first values. As these dataframes come from a package there is also a Help page for each dataframe which you access with <code>?flights</code>. There you find short descriptions about each variable.</p></li>
</ol>
<p>Write a nicely formatted short description about the variables <code>origin</code>, <code>arr_delay</code>, and <code>dep_delay</code> from <code>flights</code> and <code>engine</code> and <code>seat</code> from <code>planes</code>. Read about some markdown basics in the quarto documentation <a href="https://quarto.org/docs/authoring/markdown-basics.html" class="uri">https://quarto.org/docs/authoring/markdown-basics.html</a></p>
</section>
<section id="data-visualization" class="level3">
<h3 class="anchored" data-anchor-id="data-visualization">Data visualization</h3>
<ol type="1">
<li>We first want to know the distribution of values of the categorical variable <code>origin</code> in <code>flights</code>. To that end, make a bar chart. Read the Help <code>?geom_bar</code> and decide if you need to use <code>geom_bar</code> or <code>geom_col</code>. You can use the template below. Write your solution in the chunk <code>flightsorigin</code>. Test your line by sending it to the Console (with Ctrl + Enter). Once you are satisfied, render the document, commit the changes with message “First Visualization!” and push it. In the following, you can commit and push when you want. (Note, that we can provide help directly in your repo when you commit and push before.) This is the template.</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> __________, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> ________)) <span class="sc">+</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_TOSELECT</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li><p>Now, we want to know the distribution of values of the numerical variable <code>distance</code> in <code>flights</code>. A common visualization is a histogram. Use <code>geom-histogram</code> with the same template, write the solution in the chunk <code>flightsdistance</code>, and test it. Notice, the red comment in the console. It advises to specify a binwidth. Test <code>binwidth = 5</code>, <code>binwidth = 50</code>, and <code>binwidth = 500</code> in <code>geom_histogram</code>, notice the difference (consult <code>?geom_histogram</code>) for details, and decide which shows the distribution best.</p></li>
<li><p>In chunk <code>distributions</code> you see two ways to visualize the distribution of the number of <code>seats</code> in <code>airplanes</code> - points for each observation and a boxplot. (Read <code>?geom_boxplot</code> for more information). Note, that there are three ggplot objects (<code>g1</code>, <code>g2</code>, <code>g3</code>) which are shown combined with <code>g1 + g2 + g3</code> (using the <code>patchwork</code> package). Make the empty <code>g3</code> into a vertical histogram for the same data following the exercise before. Hint: For the vertical histogram assign <code>distance</code> to the <code>y</code> aesthetic and leave out the <code>x</code> aesthetic. Think about the advantages and disadvantages of each visualization.</p></li>
<li><p>Now, we make the first plot which visualizes two variables, the categorical variable <code>engine</code>, and the numerical variable <code>seats</code> in <code>planes</code>. Use the template with aesthetics <code>x</code> and <code>y</code> and <code>geom_boxplot</code>. Put the solution into the chunk <code>engine-seats</code></p></li>
<li><p>Two numerical variables can be visualized with a scatter plot using <code>geom_point</code> and the aesthetics <code>x</code> and <code>y</code>. Let us look at <code>dep_delay</code> and <code>arr_delay</code> of <code>flights</code>. Warning: <code>flights</code> is very large! So, do not use <code>flights</code> in <code>data = _____</code> but a random sample of 10,000 flights <code>sample_n(flights, 10000)</code>. Now, let us add information about the categorical variable <code>origin</code> and assign it to the <code>color</code> aesthetic. Put your solution into the chunk <code>delays</code>. Test your solution several times and observe the changes in the visualization because of the random sampling. (Side questions: In which region are the changes in the visualization most <em>substantial</em>?)</p></li>
<li><p>Finally, let us visualize the location of <code>airports</code> as points at their <em>longitude</em> and <em>latitude</em> (look up the variable names) and color them with the timezone <code>tzone</code> they are in. Put the solution into the chunk <code>airportlocations</code>.</p></li>
</ol>
</section>
<section id="data-wrangling-pipes-and-visualization" class="level3">
<h3 class="anchored" data-anchor-id="data-wrangling-pipes-and-visualization">Data wrangling, pipes, and visualization</h3>
<p>In the following, you have to solve some data wrangling tasks. For data wrangling, the usage of the <strong>pipe</strong>, or a chain of pipes, is convenient. You can also use the pipe to finish with a visualization.</p>
<div>
<blockquote class="blockquote">
<p><strong>Note</strong></p>
<p>Since R version 4.1 There is a pipe operator in base-R <code>|&gt;</code>. In earlier versions there is none, but there was already the pipe operator <code>%&gt;%</code> from the package <code>magrittr</code> which is part of the <code>tidyverse</code> though not in the tidyverse core. Code you find on the internet may often use <code>%&gt;%</code> instead of <code>|&gt;</code>. There are only minor differences between the two, so your default should be to replace <code>%&gt;% with</code>|&gt;`.</p>
</blockquote>
</div>
<ol type="1">
<li>Put the code snippet below into the chunk <code>flightsaveragespeed</code> and test it. The <code>mutate</code> line makes a new variable called <code>speed</code> which is the distance of the flight divided by the time in the air. The <code>select</code> line selects variables from the dataset. In this case, it selects <code>air_time</code> as the first, <code>distance</code> as the second, and the new <code>speed</code> as the third variable. All other variables are dropped.<br>
The values in the new speed variable do not look like speeds of airplanes in km/h. Why? Because they are in miles/minute which we know from the variable descriptions. Modify the equation in the mutate command such that the values are in km/h. To that end, you have to divide air time by 60 and multiply distance by a certain factor. Look up the factor. Be careful with the order of mathematical operations and maybe use brackets <code>()</code>. Test your computation. Are the speed values reasonable?<br>
Now, make a histogram of speed. Add another pipe after the <code>select</code> statement and write <code>ggplot(mapping = aes())</code> in the next line. Note, that you should not put <code>data = flights</code> into the argument of <code>ggplot()</code> this time! It is the mission of the pipe to do this. Fill out the <code>aes()</code> command accordingly, and add the geom for a histogram.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">speed =</span> distance <span class="sc">/</span> air_time ) <span class="sc">|&gt;</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(air_time, distance, speed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li>Practice <code>filter</code> operations, which subsets certain observations of a dataframe. Write a line which filters the flights which
<ol type="1">
<li>had an arrival delay of two or more hours</li>
<li>flew to Houston (IAH or HOU)</li>
<li>arrived more than two hours late, but didn’t leave late</li>
<li>started with a delay of at least an hour, but made up over 30 minutes in flight. Put all four lines into the chunk <code>filtering</code>.</li>
</ol></li>
<li>Another common operation is summarizing data. Put the code below into the chunk <code>summarizing</code> and test it. You see the average delay at departure. (See <code>?mean</code> to learn what <code>na.rm = TRUE</code> is doing). Now, we want to know the average delay at departure for each of the three airports of <code>origin</code>. This can be done by adding the variable in a <code>.by = VARNAME</code> argument to the <code>summarize</code> command.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_dep_deplay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div>
<blockquote class="blockquote">
<p><strong>Note</strong></p>
<p>Grouping for a categorical variable before summarizing or mutating other variables is a very important tool and a very common operation. Another version of doing this is to add a line with <code>group_by(VARNAME) |&gt;</code> before <code>summarize</code>. <code>group_by</code> adds some grouping information to the data frame which will then be taken into account by later operations. Older tidyverse code examples will use this operation. The results is the same. Having grouping information (unconsciously) in a dataframe objects can be a source of confusion. Therefore, the <code>.by = VARNAME</code> is now the default in tidyverse.</p>
</blockquote>
</div>
</section>
<section id="data-audit" class="level3">
<h3 class="anchored" data-anchor-id="data-audit">Data Audit</h3>
<p>Finally, you do a typical data audit task starting with the plot of <code>airportlocations</code>. The airport locations show the shape of the United States of America. (Do you recognize the shape, maybe distorted? You see Alaska?) There are four airports on the right hand side which do not fit that pattern. Filter <code>airports</code> such that you only see these four airport. Write your solution into the chunk <code>stangeairportlocations</code>. Check with internet research where these airports are located. Why are the locations from the data as they are? Write your hypotheses for each airport under the chunk in plain text.</p>
</section>
<section id="ne" class="level3">
<h3 class="anchored" data-anchor-id="ne">Ne</h3>
</section>
</section>
<section id="instructions-for-python" class="level2">
<h2 class="anchored" data-anchor-id="instructions-for-python">Instructions for python</h2>
<p>Work in the file <strong>hw-02-py.qmd</strong>.</p>
<section id="warm-up-with-rendering-and-the-git-github-dance" class="level3">
<h3 class="anchored" data-anchor-id="warm-up-with-rendering-and-the-git-github-dance">Warm up with rendering and the <em>git-GitHub dance</em></h3>
<p>Fill in your name in the YAML and render.</p>
<div>
<blockquote class="blockquote">
<p><strong>Note</strong></p>
<ul>
<li>Find out your prefered way of rendering to html with quarto for python and Visual Studio Code. As Visual Studio Code is multi language it might not be easiest to customize a click and point solution.</li>
<li>You can also render from a bash-Terminal with <code>quarto render FILE_TO_RENDER.qmd</code></li>
<li>Learn how to check the working directory (the folder where to execute the command) and how to set it correctly.</li>
<li>Maybe also the quarto <code>.qmd</code> files work not well with code highlighting and autocompletion out-of-the-box. If you are used to Jupyter notebooks (.ipynb files), e.g.&nbsp;with JupyterLab (a browser-based IDE) you may also work with these. quarto can also render .ipynb files with <code>quarto render hello.ipynb --to html</code>. Read more about the IDE you select at <a href="https://quarto.org/docs/get-started/hello/vscode.html" class="uri">https://quarto.org/docs/get-started/hello/vscode.html</a> and <a href="https://quarto.org/docs/get-started/hello/jupyter.html" class="uri">https://quarto.org/docs/get-started/hello/jupyter.html</a>.</li>
</ul>
</blockquote>
</div>
<p>Stage the modified source files and add the html-files in Git and make a commit with message “Rendering to html works”. Push this commit to GitHub.</p>
</section>
<section id="exercises" class="level3">
<h3 class="anchored" data-anchor-id="exercises">Exercises</h3>
<p>Follow the same instructions as for R, except for the code. You find coding pointers in comments in <strong>hw-02-py.qmd</strong>. Note: Some more textual questions can be omitted.</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>